<% article ||= @article %>
<% if article.has_source? %>
  <div style="display: flex; align-items: flex-start; gap: 0.75rem; margin-bottom: 0.75rem;">
    <i class="fas fa-quote-left" style="color: #6c757d; font-size: 1.25rem; margin-top: 0.125rem; opacity: 0.6;"></i>
    <div style="flex: 1;">
      <% if article.source_author.present? %>
        <span style="font-weight: 600; color: #495057; font-size: 0.95rem;"><%= article.source_author %></span>
      <% end %>
    </div>
  </div>

  <% source_links_present = article.source_url.present? || article.source_archive_url.present? %>
  <% if article.source_content.present? || source_links_present %>
    <blockquote class="source-reference__quote">
      <% if article.source_content.present? %>
        <%= simple_format(article.source_content, {}, wrapper_tag: "span") %>
      <% end %>

      <% if source_links_present %>
        <div class="source-reference__links" style="display: flex; flex-wrap: wrap; gap: 0.75rem; font-size: 0.85rem;">
          <% if article.source_url.present? %>
            <a href="<%= article.source_url %>" target="_blank" rel="noopener noreferrer" style="color: #007bff; text-decoration: none; display: inline-flex; align-items: center; gap: 0.375rem; transition: color 0.2s;">
              <i class="fas fa-external-link-alt" style="font-size: 0.75rem;"></i>
              <small>Original</small>
            </a>
          <% end %>
          <% if article.source_archive_url.present? %>
            <span style="color: #dee2e6;">|</span>
            <a href="<%= article.source_archive_url %>" target="_blank" rel="noopener noreferrer" style="color: #6c757d; text-decoration: none; display: inline-flex; align-items: center; gap: 0.375rem; transition: color 0.2s;">
              <i class="fas fa-archive" style="font-size: 0.75rem;"></i>
              <small>Archive</small>
            </a>
          <% end %>
        </div>
      <% end %>
    </blockquote>
  <% end %>
<% end %>
