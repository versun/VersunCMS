<div class="admin-container">
  <h1>Static Files Management</h1>
  <p class="subtitle">Manage static files for your website, such as icons, logos, etc.</p>

  <!-- File Upload Form -->
  <div class="upload-section">
    <h2>Upload New File</h2>
    <%= form_with model: [:admin, StaticFile.new], local: true, html: { multipart: true, class: "upload-form" } do |form| %>
      <div class="form-group">
        <%= form.label :file, "Choose File" %>
        <%= form.file_field :file, required: true %>
        <small>File will use the original filename from upload</small>
      </div>

      <div class="form-group">
        <%= form.label :description, "Description (Optional)" %>
        <%= form.text_area :description, rows: 2, placeholder: "Description of file usage" %>
      </div>

      <%= form.submit "Upload File", class: "btn btn-primary" %>
    <% end %>
  </div>

  <!-- File List -->
  <div class="files-section">
    <h2>Uploaded Files</h2>
    
    <% if @static_files.any? %>
      <table class="files-table">
        <thead>
          <tr>
            <th>Filename</th>
            <th>Description</th>
            <th>Size</th>
            <th>Upload Time</th>
            <th>Access Link</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @static_files.each do |static_file| %>
            <tr>
              <td><code><%= static_file.filename %></code></td>
              <td><%= static_file.description || "-" %></td>
              <td><%= static_file.file_size_human %></td>
              <td><%= static_file.created_at.strftime("%Y-%m-%d %H:%M") %></td>
              <td>
                <%= link_to static_file.public_path, static_file.public_path, 
                    target: "_blank", class: "btn-link" %>
              </td>
              <td>
                <%= button_to "Delete", 
                    admin_static_file_path(static_file),
                    method: :delete,
                    form: { data: { turbo_confirm: "Are you sure you want to delete #{static_file.filename}?" } },
                    class: "btn-danger btn-small" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    <% else %>
      <p class="no-files">No files uploaded yet</p>
    <% end %>
  </div>
</div>

<style>
.admin-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
}

.subtitle {
  color: #666;
  margin-bottom: 2rem;
}

.upload-section {
  background: #f9f9f9;
  padding: 1.5rem;
  border-radius: 8px;
  margin-bottom: 2rem;
}

.upload-section h2 {
  margin-top: 0;
  font-size: 1.2rem;
}

.form-group {
  margin-bottom: 1rem;
}

.form-group label {
  display: block;
  margin-bottom: 0.25rem;
  font-weight: 500;
}

.form-group input[type="text"],
.form-group select,
.form-group textarea {
  width: 100%;
  padding: 0.5rem;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.form-group small {
  display: block;
  margin-top: 0.25rem;
  color: #666;
  font-size: 0.875rem;
}

.files-section h2 {
  font-size: 1.2rem;
  margin-bottom: 1rem;
}

.files-table {
  width: 100%;
  border-collapse: collapse;
  background: white;
}

.files-table th,
.files-table td {
  padding: 0.75rem;
  text-align: left;
  border-bottom: 1px solid #eee;
}

.files-table th {
  background: #f5f5f5;
  font-weight: 600;
}

.files-table code {
  background: #f0f0f0;
  padding: 0.2rem 0.4rem;
  border-radius: 3px;
  font-family: monospace;
  font-size: 0.9em;
}

.btn-link {
  color: #0066cc;
  text-decoration: none;
}

.btn-link:hover {
  text-decoration: underline;
}

.btn-small {
  padding: 0.25rem 0.5rem;
  font-size: 0.875rem;
}

.no-files {
  color: #999;
  font-style: italic;
  padding: 2rem;
  text-align: center;
}
</style>
