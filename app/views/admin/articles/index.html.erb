<% content_for :title, "Posts|Admin" %>

<div class="admin-articles">
  <div class="admin-toolbar">
    <%= link_to "New Post", new_admin_article_path, class: "btn btn-primary" %>
    
    <div class="status-tabs">
      <%= link_to "All", admin_articles_path, class: "status-tab #{params[:status].blank? ? 'active' : ''}" %>
      <%= link_to "Published", admin_articles_path(status: 'publish'), class: "status-tab #{params[:status] == 'publish' ? 'active' : ''}" %>
      <%= link_to "Draft", admin_articles_path(status: 'draft'), class: "status-tab #{params[:status] == 'draft' ? 'active' : ''}" %>
      <%= link_to "Scheduled", admin_articles_path(status: 'schedule'), class: "status-tab #{params[:status] == 'schedule' ? 'active' : ''}" %>
      <%= link_to "Shared", admin_articles_path(status: 'shared'), class: "status-tab #{params[:status] == 'shared' ? 'active' : ''}" %>
      <%= link_to "Trash", admin_articles_path(status: 'trash'), class: "status-tab #{params[:status] == 'trash' ? 'active' : ''}" %>
    </div>
  </div>

  <div class="table-container">
    <table class="admin-table compact-table">
      <thead>
        <tr>
          <th class="col-actions-compact">Actions</th>
          <th class="col-title">Title</th>
          <th class="col-tags">Tags</th>
          <th class="col-date-compact">Created</th>
          <th class="col-date-compact">Updated</th>
        </tr>
      </thead>
      <tbody>
        <% if @articles.any? %>
          <% @articles.each do |post| %>
            <tr>
            <td class="col-actions-compact">
                <div class="action-buttons">
                  <%= link_to article_path(post), class: "action-btn", title: "View" do %>
                    <i class="fas fa-eye"></i>
                  <% end %>
                  <%= link_to edit_admin_article_path(post), class: "action-btn", title: "Edit" do %>
                    <i class="fas fa-edit"></i>
                  <% end %>
                  <% if post.status != "trash" %>
                    <%= link_to article_path(post), class: "action-btn", title: "Trash",
                          data: { turbo_method: :delete } do %>
                      <i class="fas fa-trash-alt"></i>
                    <% end %>
                  <% else %>
                    <%= link_to article_path(post), class: "action-btn", title: "Delete",
                          data: { turbo_method: :delete, turbo_confirm: "Delete permanently?" } do %>
                      <i class="fas fa-trash"></i>
                    <% end %>
                  <% end %>
                </div>
              </td>
              <td class="col-title">
                <%= link_to post.title, edit_admin_article_path(post), class: "title-link" %>
              </td>
              <td class="col-tags">
                <% if post.tags.any? %>
                  <small><%= post.tags.map(&:name).join(", ") %></small>
                <% else %>
                  <small class="text-muted">â€”</small>
                <% end %>
              </td>
              <td class="col-date-compact">
                <small><%= post.created_at.strftime("%m/%d %H:%M") %></small>
              </td>
              <td class="col-date-compact">
                <small><%= post.updated_at.strftime("%m/%d %H:%M") %></small>
              </td>
            </tr>
          <% end %>
        <% else %>
          <tr>
            <td colspan="5" class="no-content-row">
              <p>No posts found.</p>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
  
  <% if @articles.any? %>
    <div class="pagination-wrapper">
      <%= will_paginate @articles %>
    </div>
  <% end %>
</div>
